<div class="agenda-container">
  <!-- Barra Superior com Data Atual -->
  <div class="barra-superior">
    <button (click)="mudarDia(-1)">&#9664; Dia Anterior</button>
    <span>{{ diaAtual | date: 'EEEE, dd MMMM yyyy' }}</span>
    <button (click)="mudarDia(1)">Próximo Dia &#9654;</button>
  </div>

  <div class="layout-principal">
    <!-- Calendário Lateral -->
    <div class="calendario-lateral">
      <h3>Calendário</h3>
      <div class="navegacao-mes">
        <button (click)="mudarMes(-1)">&#9664;</button>
        <span>{{ mesAtual }} {{ anoAtual }}</span>
        <button (click)="mudarMes(1)">&#9654;</button>
      </div>
      <div class="dias-semana">
        <span *ngFor="let dia of diasSemana">{{ dia }}</span>
      </div>
      <div class="dias">
        <button
          *ngFor="let dia of diasDoMes"
          [class.ativo]="dia === diaAtual.getDate()"
          (click)="selecionarDia(dia)"
        >
          {{ dia }}
        </button>
      </div>
    </div>

    <!-- Legenda dos Instrutores e Turmas -->
    <div class="legendas">
      <!-- Legenda dos Instrutores -->
      <div class="legenda-instrutores">
        <h3>Legenda dos Instrutores</h3>
        <ul>
          <li *ngFor="let instrutor of instrutores">
            <span [style.background-color]="instrutor.cor" class="cor-instrutor"></span>
            {{ instrutor.nome }}
          </li>
        </ul>
      </div>

      <!-- Rodízio das Turmas -->
      <div class="rodizio-turmas">
        <h3>Rodízio das Turmas</h3>
        <table>
          <thead>
            <tr>
              <th>Dia</th>
              <th>Sala</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let dia of diasDaSemana">
              <td>{{ dia }}</td>
              <td>
                <select [(ngModel)]="salas[dia].nome" name="sala">
                  <option *ngFor="let sala of listaSalas">{{ sala }}</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Agenda -->
    <div class="agenda">
      <table>
        <thead>
          <tr>
            <th>Horário</th>
            <th *ngFor="let dia of diasDaSemana">{{ dia }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let horario of horarios">
            <td>{{ horario }}</td>
            <td *ngFor="let dia of diasDaSemana">
              <!-- Células da agenda -->
              <div
                class="celula-aula"
                [style.background-color]="getCorInstrutor(agenda[horario][dia]?.instrutor || null)"
              >
                <ul>
                  <li *ngFor="let aluno of agenda[horario][dia]?.alunos">
                    {{ aluno }}
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
